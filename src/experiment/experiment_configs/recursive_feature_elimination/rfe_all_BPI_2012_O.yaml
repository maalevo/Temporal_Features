experiments:
- seed: 42
  dataset:
    path: data/raw/BPI_2012_O.xes
    case_id_col: case:concept:name
    activity_col: concept:name
    timestamp_col: time:timestamp
  split:
    type: temporal
    params:
      test_ratio: 0.15
      val_ratio: 0.15
      seed: 42
  prefix:
    min_prefix_len: 1
    max_prefix_len: null
  target: remaining_time
  transformer:
    key: lstm
    params:
      maxlen: null
      pad_value: 0.0
      X_normalization: 0/1
      y_normalization: 0/1
  model:
    type: lstm
    params: # derived from hpo
      task: regression
      num_layers: 2
      hidden_size: 64
      lr: 1e-4
      dropout: 0.2
      batch_size: 64
      epochs: 50
      early_stopping_patience: 10
      reduce_lr_patience: 5
      reduce_lr_factor: 0.5
      verbose: 0

  base_features:
  - feature_key: activity
    source_col_name: concept:name
    encoding_key: onehot
    target_col_name: activity

  elimination_features:
# UTC
  - feature_key: utc
    encoding_key: numeric
    source_col_name: time:timestamp
    granularity_key: second
  - feature_key: utc
    encoding_key: numeric
    source_col_name: time:timestamp
    granularity_key: minute
  - feature_key: utc
    encoding_key: numeric
    source_col_name: time:timestamp
    granularity_key: hour
  - feature_key: utc
    encoding_key: numeric
    source_col_name: time:timestamp
    granularity_key: day
  - feature_key: utc
    encoding_key: numeric
    source_col_name: time:timestamp
    granularity_key: week
  - feature_key: utc
    encoding_key: numeric
    source_col_name: time:timestamp
    granularity_key: month

  # Time in day
  - feature_key: time_in_day
    encoding_key: numeric
    source_col_name: time:timestamp
    granularity_key: second
  - feature_key: time_in_day
    encoding_key: numeric
    source_col_name: time:timestamp
    granularity_key: minute
  - feature_key: time_in_day
    encoding_key: numeric
    source_col_name: time:timestamp
    granularity_key: hour
  - feature_key: time_in_day
    encoding_key: sincos
    source_col_name: time:timestamp
    encoding_params: {period: 86400}
    granularity_key: second
  - feature_key: time_in_day
    encoding_key: sincos
    source_col_name: time:timestamp
    encoding_params: {period: 86400}
    granularity_key: minute
  - feature_key: time_in_day
    encoding_key: sincos
    source_col_name: time:timestamp
    encoding_params: {period: 86400}
    granularity_key: hour
  - feature_key: time_in_day
    encoding_key: onehot
    source_col_name: time:timestamp
    granularity_key: hour

  # Time in week
  - feature_key: time_in_week
    encoding_key: numeric
    source_col_name: time:timestamp
    granularity_key: second
  - feature_key: time_in_week
    encoding_key: numeric
    source_col_name: time:timestamp
    granularity_key: minute
  - feature_key: time_in_week
    encoding_key: numeric
    source_col_name: time:timestamp
    granularity_key: hour
  - feature_key: time_in_week
    encoding_key: numeric
    source_col_name: time:timestamp
    granularity_key: day
  - feature_key: time_in_week
    encoding_key: sincos
    source_col_name: time:timestamp
    encoding_params: {period: 604800}
    granularity_key: second
  - feature_key: time_in_week
    encoding_key: sincos
    source_col_name: time:timestamp
    encoding_params: {period: 604800}
    granularity_key: minute
  - feature_key: time_in_week
    encoding_key: sincos
    source_col_name: time:timestamp
    encoding_params: {period: 604800}
    granularity_key: hour
  - feature_key: time_in_week
    encoding_key: sincos
    source_col_name: time:timestamp
    encoding_params: {period: 604800}
    granularity_key: day
  - feature_key: time_in_week
    encoding_key: onehot
    source_col_name: time:timestamp
    granularity_key: day

  # Time in month
  - feature_key: time_in_month
    encoding_key: numeric
    source_col_name: time:timestamp
    granularity_key: second
  - feature_key: time_in_month
    encoding_key: numeric
    source_col_name: time:timestamp
    granularity_key: minute
  - feature_key: time_in_month
    encoding_key: numeric
    source_col_name: time:timestamp
    granularity_key: hour
  - feature_key: time_in_month
    encoding_key: numeric
    source_col_name: time:timestamp
    granularity_key: day
  - feature_key: time_in_month
    encoding_key: sincos
    source_col_name: time:timestamp
    encoding_params: {period: 2678400}
    granularity_key: second
  - feature_key: time_in_month
    encoding_key: sincos
    source_col_name: time:timestamp
    encoding_params: {period: 2678400}
    granularity_key: minute
  - feature_key: time_in_month
    encoding_key: sincos
    source_col_name: time:timestamp
    encoding_params: {period: 2678400}
    granularity_key: hour
  - feature_key: time_in_month
    encoding_key: sincos
    source_col_name: time:timestamp
    encoding_params: {period: 2678400}
    granularity_key: day
  - feature_key: time_in_month
    encoding_key: sincos
    source_col_name: time:timestamp
    encoding_params: {period: 2678400}
    granularity_key: week
  - feature_key: time_in_month
    encoding_key: onehot
    source_col_name: time:timestamp
    granularity_key: day
  - feature_key: time_in_month
    encoding_key: onehot
    source_col_name: time:timestamp
    granularity_key: week

  # Time in year
  - feature_key: time_in_year
    encoding_key: numeric
    source_col_name: time:timestamp
    granularity_key: second
  - feature_key: time_in_year
    encoding_key: numeric
    source_col_name: time:timestamp
    granularity_key: minute
  - feature_key: time_in_year
    encoding_key: numeric
    source_col_name: time:timestamp
    granularity_key: hour
  - feature_key: time_in_year
    encoding_key: numeric
    source_col_name: time:timestamp
    granularity_key: day
  - feature_key: time_in_year
    encoding_key: numeric
    source_col_name: time:timestamp
    granularity_key: week
  - feature_key: time_in_year
    encoding_key: numeric
    source_col_name: time:timestamp
    granularity_key: month
  - feature_key: time_in_year
    encoding_key: sincos
    source_col_name: time:timestamp
    encoding_params: {period: 31622400}
    granularity_key: second
  - feature_key: time_in_year
    encoding_key: sincos
    source_col_name: time:timestamp
    encoding_params: {period: 31622400}
    granularity_key: minute
  - feature_key: time_in_year
    encoding_key: sincos
    source_col_name: time:timestamp
    encoding_params: {period: 31622400}
    granularity_key: hour
  - feature_key: time_in_year
    encoding_key: sincos
    source_col_name: time:timestamp
    encoding_params: {period: 31622400}
    granularity_key: day
  - feature_key: time_in_year
    encoding_key: sincos
    source_col_name: time:timestamp
    encoding_params: {period: 31622400}
    granularity_key: week
  - feature_key: time_in_year
    encoding_key: sincos
    source_col_name: time:timestamp
    encoding_params: {period: 31622400}
    granularity_key: month
  - feature_key: time_in_year
    encoding_key: onehot
    source_col_name: time:timestamp
    granularity_key: week
  - feature_key: time_in_year
    encoding_key: onehot
    source_col_name: time:timestamp
    granularity_key: month

  # Time since start
  - feature_key: time_since_start
    encoding_key: numeric
    source_col_name: time:timestamp
    case_source: case:concept:name
    granularity_key: second
  - feature_key: time_since_start
    encoding_key: numeric
    source_col_name: time:timestamp
    case_source: case:concept:name
    granularity_key: minute
  - feature_key: time_since_start
    encoding_key: numeric
    source_col_name: time:timestamp
    case_source: case:concept:name
    granularity_key: hour
  - feature_key: time_since_start
    encoding_key: numeric
    source_col_name: time:timestamp
    case_source: case:concept:name
    granularity_key: day
  - feature_key: time_since_start
    encoding_key: numeric
    source_col_name: time:timestamp
    case_source: case:concept:name
    granularity_key: week
  - feature_key: time_since_start
    encoding_key: numeric
    source_col_name: time:timestamp
    case_source: case:concept:name
    granularity_key: month

  # Time since last event
  - feature_key: time_since_last_event
    encoding_key: numeric
    source_col_name: time:timestamp
    case_source: case:concept:name
    granularity_key: second
  - feature_key: time_since_last_event
    encoding_key: numeric
    source_col_name: time:timestamp
    case_source: case:concept:name
    granularity_key: minute
  - feature_key: time_since_last_event
    encoding_key: numeric
    source_col_name: time:timestamp
    case_source: case:concept:name
    granularity_key: hour
  - feature_key: time_since_last_event
    encoding_key: numeric
    source_col_name: time:timestamp
    case_source: case:concept:name
    granularity_key: day
  - feature_key: time_since_last_event
    encoding_key: numeric
    source_col_name: time:timestamp
    case_source: case:concept:name
    granularity_key: week
  - feature_key: time_since_last_event
    encoding_key: numeric
    source_col_name: time:timestamp
    case_source: case:concept:name
    granularity_key: month

    
rfe:
  seed: 42
  min_features: 1
  metric: mae
  verbose: 0
  output_dir: artifacts/recursive_feature_elimination/BPI_2012_O
  load_split_prefix_cache:
    enabled: true
    backend: joblib
    #dir: artifacts/cache_joblib/load_split_prefix_cache
    # optional: bump this whenever your code changes in a breaking way
    version: v3
  feature_cache:
    enabled: true
    backend: joblib
    #dir: artifacts/cache_joblib/feature_cache
    # optional: bump this whenever your code changes in a breaking way
    version: v3
  name: rfe_rf_remove13